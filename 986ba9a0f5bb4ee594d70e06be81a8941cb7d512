{
  "comments": [
    {
      "key": {
        "uuid": "ffa51aac_282899d3",
        "filename": "recipes-phosphor/state/phosphor-post-code-manager_git.bb",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2020-09-04T18:52:27Z",
      "side": 1,
      "message": "I don\u0027t think we should install this template service in all situations.\n\nThere is a variable OBMC_HOST_INSTANCES which is a list of host instances available on a server.  Right now this defaults to \"0\".  On Yosemite we need to change this to \"1 2 3 4\".\n\nI would suggest that we remove the non-template PostCode.service and instead install PostCode@.  We also need to use SYSTEMD_LINK_${PN} to process the OBMC_HOST_INSTANCES in order to instantiate the template instances based on that variable.  (There are plenty of other examples of this being done in other recipes).\n\nIf we are going to keep the non-template PostCode.service, we need to do extra work here to process OBMC_HOST_INSTANCES and use the \"0\" to indicate PostCode.service should be installed and any other case PostCode@.service should be installed.  This is extra work that I do not think is necessary when the template version should work for all cases.",
      "revId": "986ba9a0f5bb4ee594d70e06be81a8941cb7d512",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d4b3644d_df3c99bb",
        "filename": "recipes-phosphor/state/phosphor-post-code-manager_git.bb",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1000546
      },
      "writtenOn": "2020-09-07T16:13:28Z",
      "side": 1,
      "message": "Sure. I will look into this and add the variable \"OBMC_HOST_INSTANCES\" to have host information and install the service files.",
      "parentUuid": "ffa51aac_282899d3",
      "revId": "986ba9a0f5bb4ee594d70e06be81a8941cb7d512",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "617fbb40_86e32a1b",
        "filename": "recipes-phosphor/state/phosphor-post-code-manager_git.bb",
        "patchSetId": 2
      },
      "lineNbr": 19,
      "author": {
        "id": 1000002
      },
      "writtenOn": "2020-09-08T18:20:18Z",
      "side": 1,
      "message": "Please don\u0027t use SYSTEMD_LINK - its an OpenBMC bitbake metadata anti-pattern - nobody outside OpenBMC knows what SYSTEMD_LINK is.  If you just need the template instances WantedBy multi-user.target you can do:\n\n SYSTEMD_SERVICE_${PN} \u003d \u0027${@\" \".join([\"xyz.openbmc_project.State.Boot.PostCode@{}.service\" for x in d.getVar(\u0027OBMC_HOST_INSTANCES\u0027).split()])}\u0027",
      "revId": "986ba9a0f5bb4ee594d70e06be81a8941cb7d512",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    }
  ]
}